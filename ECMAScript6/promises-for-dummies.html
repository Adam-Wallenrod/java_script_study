<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Promises for dummies</title>
  </head>

  <body>
  
    <h1>Promises, check console</h1>
	
   
  
    
  </body>
  
    

    <script>
	
	/*ES5*/
	/*
	var isMomHappy = true;
	
	var willIGetNewPhone = new Promise ( 
	  function (resolve, reject) {
	    if (isMomHappy){
         var phone = { 
						brand: 'Manta', 
						color: 'red'
					 };  
		 resolve(phone);
        } else {
            var reason = new Error('mom is not happy');
            reject(reason);
        }		
	  }
	);
	
	var showOff = function (phone) {
	    var message = 'Hey Lisa, I have a new ' + phone.color + ' ' + phone.brand + ' phone';
		
		return Promise.resolve(message);
	};

	
	var askMom = function () {
	  console.log('before asking Mom');
	  willIGetNewPhone
	    .then(showOff)
	    .then( function (done){ console.log(done); })
	    .catch( function (error) { console.log(error.message); });
	  console.log('after asking mom'); 
	  };
	
	askMom();
	
	*/
	
	
	
	/*ES6*/
	/*
	var isMomHappy = true;
	
	//Promise
	var willIGetNewPhone = new Promise ( (resolve, reject) => {
	  if(isMomHappy){
	    var phone = {
			brand: 'Manta',
			color: 'black'
			};
	    resolve(phone);		
	   } else {
	     var reason = new Error('mom is not happy');
	     reject(reason);
	   }
	});
	
	var showOff = function(phone) {
	  var message = 'Hey Lisa, I have a new ' + phone.color + ' ' + phone.brand + ' phone';
	  return Promise.resolve(message);
	
	};
	
	var askMom = function () {
	  willIGetNewPhone
	    .then(showOff)
		.then(success => console.log(success))
		.catch(error => console.log(error));
	
	};
	
	askMom();
	*/
	
	
	/*ES7*/
	
	const isMomHappy = false;
	
	//Promise
	const willIGetNewPhone = new Promise(
	  (resolve, reject) => {
	    if(isMomHappy) {
		  const phone = {
		        brand: 'Samsung',
				color: 'red'
				};
		  resolve(phone);
		} else { 
		  const reason = new Error('mom is not happy!');
		  reject(reason);
		}
	  }
	);
	
	async function showOff(phone) {
	  return new Promise((resolve, reject) => {
	    var message = 'Hey friend, I have a new ' + phone.color + ' ' + phone.brand + ' phone';
	    resolve(message); 
	  
	  }
	  
	 );
	
	};
	
	
	async function askMom() {
	  try {
	    console.log('before asking Mom');
	     
		let phone = await willIGetNewPhone;
		let message = await showOff(phone);
		
		console.log(message);
		console.log('afrer asking mom');
	  }
	  catch(error) {
	    console.log(error.message);
	  
	  }

	}
	
	(async() => { await askMom(); })();
	
	
	
	
    </script>	
	
</html>
